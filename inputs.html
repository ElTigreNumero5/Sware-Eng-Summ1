<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User inputs page</title>
    <!-- sets out where to go for styling -->
    <link rel="stylesheet" href="base.css" />
</head>
<body>
    <!-- Sets up the whole screen -->
    <div class="screen_canvas">
        <!-- Sets up only the phone app window within the whole screen-->
        <div class="phone">
            <!-- 1 month calendar with its own container-->
            <div>
                <canvas id="calendar_month"></canvas>
            </div>
            <!-- Page title -->
            <h1>Update my attendance</h1>
            
            <!-- section for target related elements and nav--> 
            <div class="bottom-row">
                <!-- Attendance target label and value-->
                <div class="target-info">
                    <span class="target-label">Monthly target</span>
                    <!-- target value needs to be read from the csv of monthly atttendance stats-->
                    <span class="target-value">--%</span>
                </div>
                <!-- Navigation buttons-->
                <button type="button" class="button button3" id="set-target-btn">Set target</button>
                <button type="button" class="button button4" onclick="window.location.assign('index.html')" >View front page</button> 
            </div>
        </div>
    </div>    
</body>

<!-- JS to build the calendar -->
<script>
    const canvas = document.getElementById('calendar_month');

</script>


<!-- JS to import and init button click func to set attend target-->
<script type="module">

    // import my function
    import { attendTargetSet } from 'functions.js';

    // initialise ready for use
    attendTargetSet();

</script>


<!-- JS to build the functionality to read target value from teh csv-->
 <!-- JS to use the stored target value - csv isn't working for what we need it to-->
<script>
    // this code requests the csv attendance data from a file in the same dir
    //fetch('f-page-attend-data.csv')  
        //.then(response => response.text())  // when fetch completes convert response to text
        //.then(text => {  // using that text
            // strip wspace, split into array of rows, ignore first row col headings
            //const rows = text.trim().split('\n').slice(1);  
            // get first row of data (not headers)
            //const firstRow = rows[0].split(',').map(v => v.trim());
            // traget is the second col of the data - get teh value
            //const targetValue = Number(firstRow[1]);
            // apply that value in the .target-value class
            //document.querySelector('.target-value').textContent = `${targetValue}%`;
        //})
    document.querySelector('.target-value').textContent = `${localStorage.getItem('updatedTarget')}%`;
</script>



</html>