<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User inputs page</title>
    <!-- sets out where to go for styling -->
    <link rel="stylesheet" href="base.css" />
</head>
<body>
    <!-- Sets up the whole screen -->
    <div class="screen_canvas">
        <!-- Sets up only the phone app window within the whole screen-->
        <div class="phone">
            <!-- 1 month calendar with its own container-->
            <div>
                <canvas id="calendar_month"></canvas>
            </div>
            <!-- Page title -->
            <h1>Update my attendance</h1>
            
            <!-- section for target related elements and nav--> 
            <div class="bottom-row">
                <!-- Attendance target label and value-->
                <div class="info-card">
                    <span class="label">Monthly target</span>
                    <!-- target value needs to be read from monthly atttendance data-->
                    <span class="value target">--%</span>
                </div>
                <!-- Navigation buttons-->
                <button type="button" class="button button3" id="set-target-btn">Set target</button>
                <button type="button" class="button button4" onclick="window.location.assign('index.html')" >View front page</button> 
            </div>
        </div>
    </div>    
</body>

<!-- JS to build the calendar -->
<script>
    const canvas = document.getElementById('calendar_month');

</script>



<!-- JS to build set target button click functionality -->
<script>

const attendTargetSet = () => {
  document.getElementById('set-target-btn').addEventListener('click', () => {
    const input = prompt('Enter your attendance target % (integer 0â€“100):', '');
    if (input === null) return; // if cancelled don't do anything, leave as is

    const num = Number(input);
    // check there's an integer between 1 and 100 - alert if not
    if (!Number.isInteger(num) || num < 0 || num > 100) {
      alert('Please enter a whole number between 0 and 100.');
      return;
    }
    // update the global var for attend target
    updatedTarget = num;
    // and make sure it's held locally (JS vars don't persist page to page I learned, the hard way)
    localStorage.setItem('updatedTarget', updatedTarget);

    // Set the target display
    document.querySelector('.value.target').textContent = `${num}%`;
  });
}


// initialise ready for use
attendTargetSet();

</script>

 <!-- JS to use the stored target value -->
<script>
    document.querySelector('.value.target').textContent = `${localStorage.getItem('updatedTarget')}%`;
</script>



</html>